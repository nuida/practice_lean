# Leanによる定理証明の勉強メモ

## 注意書き（2023年9月12日作成、2023年9月14日最終更新）
- この文書は、プログラミングを少しだけできる（謙遜とかネットミームの「チョットデキル」ではなく、文字通りに）筆者が、Leanによる定理証明に興味を持って独学を始めたものの、日本語で説明が書かれたウェブページが（皆無ではないものの）ほとんど見つからず（2023年9月現在）難儀しているので、同様の状況に陥っているかもしれない方のことを考えるととにかく（質には目をつぶって）「日本語でLeanのことが書かれたページ」を増やした方がよさそうだなぁと思ったので（あと、自分用の備忘録も兼ねて）作成・公開しているものです。つまり、書かれた内容が確実に正しいことを筆者は保証しませんし、文書に含まれるコードの具体例はそれが「良い」コードであることを含意しません。
- なお、（私が知っている、数少ない）日本語のまとまった参考文献として以下を挙げておきます。本文書はあまり系統的な記述にはならないと思いますので、系統的な説明を欲している方はそちらを参照してください。
  - [Theorem Proving in Lean 4の日本語訳](https://aconite-ac.github.io/theorem_proving_in_lean4_ja/title_page.html)
  - [「数学系のためのLean勉強会」の記録（教材付き）](https://haruhisa-enomoto.github.io/lean-math-workshop/)
- [ライブラリMathlib4のドキュメントのページ](https://leanprover-community.github.io/mathlib4_docs/)には、Mathlib4だけでなく標準の（つまり、何もimportしなくてもそのまま使える）機能についての説明も書かれています（ただしすべて英語ですが…）。同ページからは対応するソースコードも参照できます。ある機能の仕様がどうしてもわからないという場合は、上記ページから辿れるソースコードを頑張って解読する羽目になります。
- この文書の内容はLean 4、より詳しくはバージョン 4.0.0-nightly-2023-07-20 に基づいています。また、筆者の環境ではWindows上でVisual Studio Codeの拡張機能を用いてLeanのコードを書いています。なお、Lean自体のインストールの方法などは（筆者自身もよくわからないまま、色々と検索しつつ試していたら何とかできたというありさまなので）筆者は説明できません。

## 全体的な雑感（2023年9月12日作成）
- Leanは各オブジェクトに型がしっかりと定められている類（←正式な名称がわかりません）の言語です。そして、Leanではこの型を検査する機能を活用して定理の証明の検証が行えます…ということらしいです。現時点での私の理解では、
  - 型の種類の中に「命題の型」と、命題Pの各々について「Pの正しい証明の型」が存在します。
  - 「命題Pの正しい証明」の候補である何らかの証明を与えたとき、その証明が「『命題Pの正しい証明』型のオブジェクト」であることが（Leanの型推論の機能により）確認できれば、そのことが「命題Pが正しく証明できた」ことを意味します。
  - Leanでは「型Tのオブジェクトを型T'のオブジェクトに写す写像（関数）」の型を T → T' で表し、また命題の含意（「ならば」）も（二重矢印「⇒」ではなく）記号 → で表されます。この記号が重複しているのは偶然ではなく、Leanの論理体系における命題の含意とは「前件（「ならば」の前の部分）の正しい証明」（より正確には「『前件の正しい証明』型のオブジェクト）から「後件（「ならば」の後の部分）の正しい証明」を得る具体的な手順が存在すること、すなわち「前件の正しい証明」を「後件の正しい証明」に写す写像が存在することを（恐らく）意味するからです。
- 上で述べたような「命題Pの正しい証明から命題Qの正しい証明を得る具体的な操作が与えられたときにのみ、『PならばQ』が真であると結論付ける」という特徴は直観主義論理を想起させます。実際、（どこに書いてあったのか失念しましたが、）Leanの論理構造はいわゆる古典論理ではなく直観主義論理に基づいているとのことです。

## 証明の簡単な例（作成中）

```
/- 名前のない定理とその証明の例 -/
example : ∀ a b : Nat, a ≤ b → a + 1 ≤ b + 2 := by
  intro a b
  intro h_ab
  have h_12 : 1 ≤ 2 := by trivial
  apply Nat.add_le_add h_ab h_12
```

```
example : ∀ a b : Nat, a ≤ b → a + 1 ≤ b + 2 := by
  intro a b h_ab
  have : a ≤ b + 1 := Nat.le_succ_of_le h_ab
  have : a + 1 ≤ b + 2 := Nat.succ_le_succ this
  exact this
```

## 集合に関する簡単な例の話（作成中）


